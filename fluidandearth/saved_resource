(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}function primitiveHasOwnProperty(primitive,propName){return primitive!=null&&typeof primitive!=="object"&&primitive.hasOwnProperty&&primitive.hasOwnProperty(propName)}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,intermediateValue,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){intermediateValue=context.view;names=name.split(".");index=0;while(intermediateValue!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(intermediateValue,names[index])||primitiveHasOwnProperty(intermediateValue,names[index]);intermediateValue=intermediateValue[names[index++]]}}else{intermediateValue=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit){value=intermediateValue;break}context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var cacheKey=template+":"+(tags||mustache.tags).join(":");var tokens=cache[cacheKey];if(tokens==null)tokens=cache[cacheKey]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials,tags){var tokens=this.parse(template,tags);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="3.0.0";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials,tags){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials,tags)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;return mustache});
/*!
 * Copyright (c) 2017 NAVER Corp.
 * @egjs/jquery-pauseresume project is licensed under the MIT license
 * 
 * @egjs/jquery-pauseresume JavaScript library
 * 
 * 
 * @version 2.0.1
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],t);else{var n=t("object"==typeof exports?require("jquery"):e.jQuery);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(0),i=_interopRequireDefault(r),a=n(2),o=_interopRequireDefault(a),s=n(4),u=_interopRequireDefault(s);t["default"]=function(e){function generateNewEasingFunc(e,t,n,r){return function(i){return n(r(e+t*i))}}var t=e.fn.animate,n=e.fn.stop,r=e.fn.delay;e.fn.animate=function(n,r,i,a){return this.each(function(){var s=e.speed(r,i,a);s.complete=function(){o["default"].prepareNextAniProp(this)},o["default"].addAniProperty("animate",this,n,s),t.call(e(this),n,s)})},e.fn.delay=function(t,n){var i=void 0,a=arguments.length<=2?undefined:arguments[2];return n&&"fx"!==n?r.call(this,t,n):(i=parseInt(t,10),i=isNaN(i)?0:i,this.each(function(){var n=this;a||o["default"].addAniProperty("delay",this,null,{duration:i}),r.call(e(this),t).queue(function(e){e(),o["default"].removeAniProperty(n)})}))},e.fn.pause=function(){return this.each(function(){var t=void 0;"inprogress"===o["default"].getStatus(this)&&(e.queue(this,"fx",[e.noop]),n.call(e(this)),(t=this.__aniProps[0])&&(t.elapsed+=e.now()-t.start,t.elapsed>=t.opt.duration&&(t=o["default"].prepareNextAniProp(this)),t&&(t.paused=!0)))})},e.fn.resume=function(){return this.each(function(){var n=void 0,r=void 0;if("paused"===o["default"].getStatus(this))for(e.queue(this,"fx",[]),r=0,n=this.__aniProps[r];n;){if(n.elapsed>0&&n.opt.easing){var i=n.elapsed/n.opt.duration,a=1-i,s=e.easing[n.opt.easing],p=s(i),f=u["default"].scaler([p,1],[0,1]),l=n.opt.easing+"_"+n.uuid;e.easing[l]=generateNewEasingFunc(i,a,f,s),n.opt.easing=l,n.addEasingFn(l)}n.paused=!1,n.opt.duration-=n.elapsed,(n.opt.duration>0||0===n.elapsed)&&(0===r&&n.init(),"delay"===n.type?e(this).delay(n.opt.duration,"fx",!0):t.call(e(this),n.prop,n.opt)),r++,n=this.__aniProps[r]}})},e.fn.stop=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];return n.apply(this,t),"string"!=typeof i&&(a=i),this.each(function(){var e=void 0;if("empty"!==o["default"].getStatus(this))if(a){for(e=this.__aniProps.shift();e;)e.clearEasingFn(),e=this.__aniProps.shift();this.__aniProps=[]}else(e=this.__aniProps.shift())&&e.clearEasingFn()})},e.expr.filters.paused=function(e){return"paused"===o["default"].getStatus(e)}}(i["default"]),e.exports=t["default"]},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(r),a=function(){function AniPropertyManager(){_classCallCheck(this,AniPropertyManager)}return AniPropertyManager.addAniProperty=function(e,t,n,r){var a=new i["default"](e,t,n,r);t.__aniProps=t.__aniProps||[],0===t.__aniProps.length&&a.init(),t.__aniProps.push(a)},AniPropertyManager.removeAniProperty=function(e){var t=e.__aniProps.shift();t&&t.clearEasingFn(),e.__aniProps[0]&&e.__aniProps[0].init()},AniPropertyManager.prepareNextAniProp=function(e){var t=e.__aniProps.shift(),n=t.opt.old;return t.clearEasingFn(),n&&"function"==typeof n&&n.call(e),e.__aniProps[0]&&e.__aniProps[0].init(),e.__aniProps[0]},AniPropertyManager.getStatus=function(e){return e.__aniProps&&0!==e.__aniProps.length?e.__aniProps[0].paused?"paused":"inprogress":"empty"},AniPropertyManager}();t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(r),a=i["default"],o=1,s=function(){function AniProperty(e,t,n,r){_classCallCheck(this,AniProperty),this.el=t,this.opt=r,this.start=-1,this.elapsed=0,this.paused=!1,this.uuid=o++,this.easingNames=[],this.prop=n,this.type=e}return AniProperty.prototype.init=function(){this.start=a.now(),this.elapsed=0;for(var e in this.prop){var t=this.prop[e];if("transform"!==e&&"string"==typeof t){var n=t.search(/[+|-]=/);if(!(n<0)){var r="-"===t.charAt(n)?-1:1,i=a.css(this.el,e);this.prop[e]=t.replace(/([-|+])*([\d|.])+/g,AniProperty.generateAbsoluteValMaker(i,e,r)).replace(/[-|+]+=/g,"")}}}},AniProperty.prototype.addEasingFn=function(e){this.easingNames.push(e)},AniProperty.prototype.clearEasingFn=function(){var e=void 0;for(e=this.easingNames.shift();e;)delete a.easing[e],e=this.easingNames.shift();this.easingNames=[]},AniProperty.generateAbsoluteValMaker=function(e,t,n){var r=e;return function(e){return(r=r&&"auto"!==r?parseFloat(r):0)+e*n}},AniProperty}();t["default"]=s,e.exports=t["default"]},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=function(){function MathUtil(){_classCallCheck(this,MathUtil)}return MathUtil.interpolateNumber=function(e,t){var n=+e,r=+t;return function(e){return n*(1-e)+r*e}},MathUtil.uninterpolateNumber=function(e,t){var n=+e,r=t-n;return r=r||1/r,function(e){return(e-n)/r}},MathUtil.scaler=function(e,t){var n=MathUtil.uninterpolateNumber(e[0],e[1]),r=MathUtil.interpolateNumber(t[0],t[1]);return function(e){return r(n(e))}},MathUtil}();t["default"]=r,e.exports=t["default"]}])});
var surveyCss = `.picosurvey--box {
  all: initial;
  * {
    all: unset;
  }
}

@media only screen and (max-width: 885px) {
  .picosurvey.picosurvey--box {
    display: none;
  }
}

.picosurvey--box {
  position: fixed;
  z-index: 9999;
  width: 320px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  padding: 24px 24px 10px 24px;
  margin: 0;
  background: #fffffffa;
  opacity: 1;
  box-shadow: 0 4px 16px rgba(0,0,0,.04);
  text-align: left;
  display: block;
  box-sizing: content-box;
  overflow: hidden;
  line-height: 1;
  font-family: "Libre Franklin", "Helvetica Neue", helvetica, arial, sans-serif;
}

.picosurvey--box-bottom {
  bottom: 40px;
}

.picosurvey--box-left {
  left: 24px;
}

.picosurvey--box-right {
  right: 24px;
}

.picosurvey--hidden {
  display: none;
}

.picosurvey__border_bottom {
  position: absolute;
  left: 0;
  bottom: 0;
  height: 3px;
  width: 100%;
  border-bottom: 1px solid #111111ee;
}

.picosurvey--slide-in-left {
	-webkit-animation: slide-in-left 1s cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.1s both;
	        animation: slide-in-left 1s cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.1s both;
}

.picosurvey--slide-in-bottom {
	-webkit-animation: slide-in-bottom 1s cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.1s both;
	        animation: slide-in-bottom 1s cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.1s both;
}

.picosurvey--slide-out-left {
	-webkit-animation: slide-out-left 0.5s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;
	        animation: slide-out-left 0.5s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;
}

.picosurvey__close {
  position: absolute;
  border: none;
  background: inherit;
  color: #d6dde3;
  fill: #d6dde3;
  padding: 0;
  margin: 0;
  line-height: 1;
}

.picosurvey__close_top {
  top: 24px;
  right: 24px;
}

.picosurvey__close_bottom {
  bottom: 24px;
  left: 24px;
}

.picosurvey__close svg {
  width: 16px;
  height: 16px;
  transition: .5s all;
}

.picosurvey__close:active,
.picosurvey__close:focus,
.picosurvey__close:hover {
  background: inherit;
  color: #22252b;
  fill: #22252b;
  cursor: pointer;
}

.picosurvey__question {
  margin: 0 0 15px 0;
  padding: 0;
  font-size: 16px;
  color: #22252b;
  font-weight: 700;
}

.picosurvey__step {
  display: none;
}

.picosurvey .picosurvey__step:first-of-type {
  display: block;
}

.picosurvey__answers {
  margin-bottom: 8px;
  overflow: hidden;
}

.picosurvey__answers_yesno {
  text-align: center;
  overflow: visible;
}

.picosurvey__answer {
  float: left;
  margin: 0 8px 8px 0;
  border: 1px solid #d6dde3;
  border-radius: 3px;
  padding: 4px 8px;
  background: #fff;
  color: #555555;
  font-weight: 300;
  font-size: 13px;
  line-height: 18px;
  text-decoration: none;
  transition: .3s all;
}

.picosurvey__answer_yesno {
  border: none;
  float: none;
  fill: #222222;
  display: inline-block;
  margin: 0 10px;
}

.picosurvey__answer.picosurvey__answer_no {
  position: relative;
  top: 18px;
}

.picosurvey__answer.picosurvey__answer_yesno:hover,
.picosurvey__answer.picosurvey__answer_yesno:active
.picosurvey__answer.picosurvey__answer_yesno:focus {
  outline: none;
  background: none;
  cursor: pointer;
}

.picosurvey__answer.picosurvey__answer_yes:hover path {
  fill: green;
}

.picosurvey__answer.picosurvey__answer_no:hover path {
  fill: red;
}

.picosurvey__answer:active,
.picosurvey__answer:focus {
  outline: thin dotted;
  background: inherit;
}

.picosurvey__answer:active {
  outline: thin dotted;
  background: #d6dde3;
  color: white;
}

.picosurvey__answer:hover {
  border-color: #a5b2bd;
  background: #fafafa;
  cursor: pointer;
}

.picosurvey__answer:last-child {
  margin-right: 0;
}

.picosurvey__explanation {
  display: block;
  margin: 0 0 12px 0;
  color: #555555;
  font-style: italic;
  font-size: 12px;
  line-height: 1.8;
}

.picosurvey__explanation a {
  border-bottom: 1px dashed #888888;
}

.picosurvey__explanation a:hover {
  border-bottom: 1px solid #888888;
}

.picosurvey__poweredby {
  display: block;
  margin: 0;
  color: #888888;
  font-style: italic;
  font-size: 12px;
  text-align: right;
  
}

.picosurvey__poweredby a {
  color: inherit;
}

.picosurvey__poweredby a:hover,
.picosurvey__poweredby a:active,
.picosurvey__poweredby a:focus {
  color: #000000;
}

.picosurvey__logo img {
  max-height: 32px;
  width: auto;
  transition: .3s all;
  filter: grayscale(100%);
}

.picosurvey__logo:hover img {
  transform: rotate(-26deg);
  filter: grayscale(0%);
}

.picosurvey__square {
  position: absolute;
  background-color: #000000;
  opacity: 0.08;
  transform: rotate(45deg);
  z-index: -1;
}

.picosurvey__square--big {
  width: 100px;
  height: 100px;
  right: -15px;
  top: 58px;
  border-radius: 20px;
}

.picosurvey__square--medium {
  width: 70px;
  height: 70px;
  left: 35%;
  bottom: -30px;
  border-radius: 15px;
}

.picosurvey__square--small {
  width: 50px;
  height: 50px;
  left: 47px;
  top: -5px;
  border-radius: 10px;
}

/**
 * ----------------------------------------
 * animation slide-in-left
 * ----------------------------------------
 */
@-webkit-keyframes slide-in-left {
  0% {
    -webkit-transform: translateX(-1000px);
            transform: translateX(-1000px);
    opacity: 0;
  }
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
    opacity: 1;
  }
}
@keyframes slide-in-left {
  0% {
    -webkit-transform: translateX(-1000px);
            transform: translateX(-1000px);
    opacity: 0;
  }
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
    opacity: 1;
  }
}

/**
 * ----------------------------------------
 * animation slide-out-left
 * ----------------------------------------
 */
@-webkit-keyframes slide-out-left {
  0% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
    opacity: 1;
  }
  100% {
    -webkit-transform: translateX(-1000px);
            transform: translateX(-1000px);
    opacity: 0;
  }
}
@keyframes slide-out-left {
  0% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
    opacity: 1;
  }
  100% {
    -webkit-transform: translateX(-1000px);
            transform: translateX(-1000px);
    opacity: 0;
  }
}

/**
 * ----------------------------------------
 * animation slide-in-bottom
 * ----------------------------------------
 */
@-webkit-keyframes slide-in-bottom {
  0% {
    -webkit-transform: translateY(1000px);
            transform: translateY(1000px);
    opacity: 0;
  }
  100% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
    opacity: 1;
  }
}
@keyframes slide-in-bottom {
  0% {
    -webkit-transform: translateY(1000px);
            transform: translateY(1000px);
    opacity: 0;
  }
  100% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
    opacity: 1;
  }
}`;

var surveyHtml = `<div class="picosurvey picosurvey--box picosurvey--box-bottom picosurvey--box-left picosurvey--hidden" data-track="show" data-track-category="show" data-survey-id="{{surveyId}}">
  <button class="picosurvey__close picosurvey__close_top" data-track="click" data-track-category="dismiss" title="{{labels.dismiss}}">
    <svg viewBox="0 0 26.1 26.1" xmlns="http://www.w3.org/2000/svg">
      <polygon points="26.1,1.7 24.4,0 13,11.3 1.7,0 0,1.7 11.3,13 0,24.4 1.7,26.1 13,14.8 24.4,26.1 26.1,24.4 14.8,13 "></polygon>
    </svg>
  </button>
  
  {{#surveySingleAnswer}}
    <div class="picosurvey__step">
      <h3 class="picosurvey__question">{{title}}</h3>
      <p class="picosurvey__explanation">{{description}}</p>
      <div class="picosurvey__answers picosurvey__answers_chooseone">
      {{#answers}}
        <button title="{{labels.voteTitle}}" class="picosurvey__answer" data-track="click" data-track-category="vote" data-track-value="{{value}}">{{label}}</button>
      {{/answers}}
      </div>
    </div>
  {{/surveySingleAnswer}}
  
  {{#surveyYesNo}}
    <div class="picosurvey__step">
      <h3 class="picosurvey__question">{{title}}</h3>
      <p class="picosurvey__explanation">{{description}}</p>
      <div class="picosurvey__answers picosurvey__answers_yesno">
        <button title="{{labels.voteYesTitle}}" class="picosurvey__answer picosurvey__answer_yesno picosurvey__answer_yes" data-track="click" data-track-category="vote" data-track-value="yes">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 155 155" width="64px" height="64px" xml:space="preserve">
		<path d="M150.669,84.068c7.858-7.823,5.43-23.647-8.181-23.647l-35.813,0.024
			c1.36-7.584,3.33-20.156,3.252-21.343c-0.752-11.242-7.918-24.924-8.228-25.484c-1.307-2.434-7.906-5.734-14.547-4.32
			c-8.586,1.838-9.463,7.315-9.428,8.825c0,0,0.37,14.983,0.406,18.981c-4.105,9.016-18.259,32.71-22.549,34.536
			c-1.026-0.621-2.19-0.955-3.401-0.955H6.934C3.091,70.685,0,73.793,0,77.618l0.006,62.533c0.269,3.371,3.133,6.015,6.516,6.015
			h40.64c3.604,0,6.534-2.93,6.534-6.534v-2.076c0,0,1.51-0.113,2.196,0.328c2.613,1.659,5.842,3.747,10.054,3.747h60.647
			c22.674,0,20.24-20.126,18.169-22.871c3.831-4.171,6.2-11.528,2.966-17.34C150.21,98.789,154.578,91.557,150.669,84.068z
			 M45.766,139.62H6.51V77.212h39.256V139.62z M140.09,83.531l-0.37,1.545c10.448,2.971,4.887,15.013-2.608,15.794l-0.37,1.545
			c10.018,2.548,5.239,14.947-2.608,15.794l-0.37,1.539c8.181,1.343,6.2,15.305-6.194,15.305l-61.686,0.024
			c-4.356,0-8.324-4.964-11.528-4.964H51.56V82.075c3.485-2.16,7.769-4.964,10.15-6.987c4.499-3.837,22.913-33.593,22.913-37.317
			s-0.406-19.834-0.406-19.834s3.61-4.654,11.671-1.259c0,0,6.784,12.721,7.476,22.859c0,0-3.055,20.884-4.696,27.436h42.765
			C151.94,66.985,149.935,81.986,140.09,83.531z"/>
	</svg>
  </button>
        <button title="{{labels.voteNoTitle}}" class="picosurvey__answer picosurvey__answer_yesno picosurvey__answer_no" data-track="click" data-track-category="vote" data-track-value="no">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 155 155" width="64px" height="64px" xml:space="preserve">
		<path d="M4.454,71.061c-7.858,7.829-5.43,23.653,8.181,23.653l35.813-0.024
			c-1.36,7.584-3.33,20.156-3.252,21.338c0.752,11.248,7.924,24.93,8.228,25.485c1.307,2.434,7.906,5.734,14.553,4.32
			c8.586-1.838,9.463-7.315,9.428-8.825c0,0-0.376-14.983-0.406-18.981c4.099-9.022,18.253-32.71,22.555-34.536
			c1.026,0.621,2.184,0.949,3.395,0.949h45.247c3.843,0,6.934-3.109,6.934-6.934l-0.006-62.533
			c-0.269-3.371-3.127-6.015-6.516-6.015h-40.634c-3.604,0-6.54,2.93-6.54,6.534v2.076c0,0-1.51,0.107-2.196-0.328
			c-2.608-1.659-5.842-3.747-10.054-3.747H28.542c-22.674,0-20.234,20.126-18.169,22.871c-3.831,4.171-6.2,11.528-2.966,17.34
			C4.913,56.34,0.545,63.572,4.454,71.061z M109.357,15.509h39.256v62.407h-39.256C109.357,77.917,109.357,15.509,109.357,15.509z
			 M15.027,71.598l0.37-1.545c-10.448-2.971-4.887-15.007,2.602-15.794l0.37-1.545C8.35,50.165,13.13,37.766,20.976,36.918
			l0.364-1.539c-8.181-1.343-6.2-15.305,6.194-15.305l61.685-0.024c4.356,0,8.324,4.964,11.534,4.964h2.793v48.033
			c-3.485,2.166-7.763,4.964-10.15,6.993c-4.499,3.837-22.913,33.593-22.913,37.317c0,3.723,0.412,19.834,0.412,19.834
			s-3.616,4.648-11.671,1.259c0,0-6.784-12.727-7.476-22.859c0,0,3.049-20.884,4.696-27.442H13.678
			C3.183,88.144,5.188,73.137,15.027,71.598z"/>
</svg>
        </button>
      </div>
    </div>
  {{/surveyYesNo}}
  
  {{#showThankYou}}
    <div class="picosurvey__step">
      <h3 class="picosurvey__question">{{thankYouTitle}}</h3>
      <p class="picosurvey__explanation">{{> thankYouDescription}}</p>
    </div>
  {{/showThankYou}}
  
  <p class="picosurvey__poweredby"><a target="_blank" class="picosurvey__logo" title="{{labels.poweredByTitle}}" href="https://picosurveys.com/?utm_source=survey-box-branding&utm_campaign=prelaunch&utm_content={{surveyId}}"><img src="{{cdnUrl}}pico-icon-small.png" alt="{{labels.poweredByTitle}}" title="{{labels.poweredByTitle}}"></a></p>
  <div class="picosurvey__square picosurvey__square--big"></div>
  <div class="picosurvey__square picosurvey__square--medium"></div>
  <div class="picosurvey__square picosurvey__square--small"></div>
  <div class="picosurvey__border_bottom picosurvey--hidden"></div>
</div>`;

var surveyConfig = {
  surveyId: 'ucp-templates-1',
  width: 370,
  title: 'What kind of templates do you need the most?',
  description: 'We\'d love to create more templates just for you.',
  descriptionPosition: 'top',
  surveySingleAnswer: true,
  answers: [
    { label: 'Nature', value: ''},
    { label: 'Animals', value: ''},
    { label: 'Business', value: ''},
    { label: 'Technology', value: ''},
    { label: 'Sport', value: ''},
    { label: 'Automotive', value: ''},
    { label: 'Travel', value: ''},
    { label: 'Fashion', value: ''},
    { label: 'Lifestyle', value: ''},
    { label: 'Entertainment', value: ''},
    { label: 'Abstract', value: ''},
    { label: 'Cartoon', value: ''},
  ],
  colorBase: '#11111188',
  maxViewsPerUser: -1,
  maxViewsPerUrl: -1,
  showPageRules: {
    include: '#ucp-template, .page-template-page-templates-dynamic',
    exclude: '',
  },
  showUrlRules: { },
  showOn: '',
  showAnimation: 'picosurvey--slide-in-left',
  showAnimationDelay: 2500,
  labels: {
    dismiss: 'Close the survey and don\'t show it again',
    voteTitle: 'Click to vote',
    poweredByTitle: 'Powered by Pico Surveys. Get a survey on your site in less than 2 minutes!',
  },
};
jQuery(function($) {
  surveyConfig.cdnUrl = 'https://app.picosurveys.com/images/';
  surveyConfig._voted = false;
  
  function isShowSurvey() {
    console.log('Survey ID: ' + surveyConfig.surveyId);
    
    if (surveyConfig.showPageRules.include && $(surveyConfig.showPageRules.include).length == 0) {
      console.log('Skip survey - page include rule.');
      return false;
    }
    
    if (surveyConfig.showPageRules.exclude && $(surveyConfig.showPageRules.exclude).length != 0) {
      console.log('Skip survey - page exclude rule.');
      return false;
    }
    
    dismissed = localStorage.picoSurveyDismissed || '{}';
    dismissed = JSON.parse(dismissed);
    if (dismissed[surveyConfig.surveyId] == true) {
      console.log('Skip survey - dismissed by user.');
      return false;
    }
    
    voted = localStorage.picoSurveyVoted || '{}';
    voted = JSON.parse(voted);
    if (voted[surveyConfig.surveyId] == true) {
      console.log('Skip survey - user already voted.');
      return false;
    }
    
    if (surveyConfig.maxViewsPerUser != -1) {
      viewsCount = localStorage.picoSurveyViews || '{}';
      viewsCount = JSON.parse(viewsCount);
      if (viewsCount[surveyConfig.surveyId] >= surveyConfig.maxViewsPerUser) {
        console.log('Skip survey - max views per user rule.');
        return false;
      }
    }
    
    return true;
  } // isShowSurvey
  
  
  function sendGaEvent(category, label) {
    action = surveyConfig.surveyId;
    if (typeof label == 'undefined') {
      // label = null;
    }
    
    if (typeof __gaTracker == 'function') {
      __gaTracker('send', 'event', category, action, label);
    } else if (typeof ga == 'function') {
      ga('send', 'event', category, action, label);
    } else {
      console.log('No GA instance found. ' + category + ' ' + action + ' ' + (label || ''));
      return false;
    }
    
    return true;
  } // sendGaEvent

  // maybe show survey
  if (isShowSurvey()) { // todo remove
    $('head').append('<style type="text/css" id="pico">' + surveyCss + '</style>');
  
    surveyHtmlParsed = Mustache.render(surveyHtml, surveyConfig, surveyConfig);
    $('body').append(surveyHtmlParsed);
    
    if (typeof surveyConfig.width == 'number' && surveyConfig.width != 320) {
      $('.picosurvey--box').css('width', surveyConfig.width + 'px');
    }
    
    if (typeof surveyConfig.left == 'number' && surveyConfig.left != 24) {
      $('.picosurvey--box-left').css('left', surveyConfig.left + 'px');
    }
    
    $('.picosurvey__square').css('background', surveyConfig.colorBase);
    
    $('.picosurvey--box').delay(surveyConfig.showAnimationDelay).queue(function() {
        $(this).removeClass('picosurvey--hidden').addClass(surveyConfig.showAnimation);
        
        viewsCount = localStorage.picoSurveyViews || '{}';
        viewsCount = JSON.parse(viewsCount);
        if (typeof viewsCount[surveyConfig.surveyId] == 'undefined') {
          viewsCount[surveyConfig.surveyId] = 0;
        }
        viewsCount[surveyConfig.surveyId]++;
        localStorage.picoSurveyViews = JSON.stringify(viewsCount);
        
        sendGaEvent('PicoShow');
        surveyConfig._showTimestamp = new Date();
    });
  } // maybe show survey
  
  // vote
  $('.picosurvey').on('click', '.picosurvey__answer', function(e) {
    answer = $(this).text();
    if (!$.trim(answer)) {
      answer = $(this).data('track-value');
    }
    
    sendGaEvent('PicoVote', answer);
    surveyConfig._voted = true;
    
    voted = localStorage.picoSurveyVoted || '{}';
    voted = JSON.parse(voted);
    voted[surveyConfig.surveyId] = true;
    localStorage.picoSurveyVoted = JSON.stringify(voted);
    
    if (typeof surveyConfig.showThankYou != 'undefined' && surveyConfig.showThankYou) {
      $('.picosurvey .picosurvey__step').first().remove();
      $('.picosurvey').addClass('picosurvey--box-border-bottom');
      $('.picosurvey__border_bottom').removeClass('picosurvey--hidden').animate({
        width: 0,
      }, 3000, function() {
        $('.picosurvey').addClass('picosurvey--slide-out-left');
      }).pause();
      $('.picosurvey--box').hover(function() {
        $('.picosurvey__border_bottom').pause();
      }, function() {
        $('.picosurvey__border_bottom').resume();
      });
    } else {
      $('.picosurvey').addClass('picosurvey--slide-out-left');
    }
    
    e.preventDefault();
    return false;
  });
  
  // dismiss
  $('.picosurvey').on('click', '.picosurvey__close', function(e) {
    $('.picosurvey').addClass('picosurvey--slide-out-left');
    
    elapsedTime = (new Date().getTime() - surveyConfig._showTimestamp.getTime()) / 1000;
    //elapsedTime = elapsedTime.toFixed(1);
    elapsedTime = Math.round(elapsedTime);
    
    if (surveyConfig._voted) {
      sendGaEvent('PicoDismissVoted', elapsedTime);
    } else {
      sendGaEvent('PicoDismiss', elapsedTime);
      
      dismissed = localStorage.picoSurveyDismissed || '{}';
      dismissed = JSON.parse(dismissed);
      dismissed[surveyConfig.surveyId] = true;
      localStorage.picoSurveyDismissed = JSON.stringify(dismissed);
    }
    
    e.preventDefault();
    return false;
  });
}); // onload
